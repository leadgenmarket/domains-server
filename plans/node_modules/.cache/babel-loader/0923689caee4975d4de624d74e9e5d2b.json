{"ast":null,"code":"var _jsxFileName = \"/Users/laurkankusu/Documents/development/domains-server/plans/src/components/pages/domains/list/domains-page.js\",\n    _s = $RefreshSig$();\n\nimport PageTitle from \"../../../page-title\";\nimport TableItem from \"./table-item\";\nimport { compose } from \"../../../../utils\";\nimport { withApiService } from \"../../../hoc\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport { Component, useEffect, useRef, useState } from \"react\";\nimport { fetchDomains, fetchMore } from \"../../../../actions/domains\";\nimport { Spinner } from \"../../../spinner\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Modals, showModal } from \"../../../modals\";\nimport ApiService from \"../../../../services/api-service\";\nimport { toast } from \"react-toastify\";\nimport { BottomScrollListener } from 'react-bottom-scroll-listener';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DomainsPage = _ref => {\n  _s();\n\n  let {\n    domains,\n    cursor,\n    loading,\n    fetchDomains,\n    fetchMore\n  } = _ref;\n  const [templates, setTemplates] = useState(null);\n  const [load, setLoad] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [editDomain, setEditDomain] = useState({});\n  const navigate = useNavigate();\n\n  const getTemplateById = id => {\n    let name = \"\";\n\n    if (templates != null) {\n      templates.map(template => {\n        if (template.ID == id) {\n          name = template.Name;\n        }\n      });\n    }\n\n    return name;\n  };\n\n  const forms = [{\n    title: 'Добавить домен',\n    name: 'addTitle',\n    url: \"/api/titles/\",\n    type: \"put\",\n    action: action => {\n      console.log('need to close modal');\n      fetchDomains();\n    },\n    fields: [{\n      name: 'Title',\n      json: 'title',\n      type: 'text'\n    }]\n  }, {\n    title: 'Редактировать тайтл',\n    name: 'updateTitle',\n    url: \"/api/titles/\",\n    type: \"post\",\n    action: action => {\n      console.log(action);\n      fetchDomains();\n    },\n    edit: action => {\n      setEditDomain(action);\n    },\n    //imageurl:\"public/objects/\"+activeObject.ID+\"/actions/\", //id\n    date: editDomain,\n    clear: false,\n    fields: [{\n      name: 'Title',\n      json: 'title',\n      type: 'text'\n    }, {\n      json: 'ID',\n      type: 'hidden'\n    }]\n  }, {\n    title: 'Удалить тайтл',\n    question: 'Вы действительно хотите удалить тайтл?',\n    name: 'deleteTitle',\n    url: \"/api/titles/\" + editDomain.ID,\n    type: \"delete\",\n    action: action => {\n      console.log(action);\n      fetchDomains();\n    },\n    //edit: () => {},\n    date: editDomain,\n    clear: false,\n    fields: [{\n      json: 'ID',\n      type: 'hidden'\n    }]\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-content\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid\",\n        children: [/*#__PURE__*/_jsxDEV(PageTitle, {\n          title: \"Список доменов\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"\",\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"end\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"mb-4\",\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => {\n                        navigate('/add', {\n                          replace: false\n                        });\n                      },\n                      type: \"button\",\n                      className: \"btn btn-primary waves-effect waves-light\",\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"feather-plus\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 101,\n                        columnNumber: 173\n                      }, this), \" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u043E\\u043C\\u0435\\u043D\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"table-responsive\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    id: \"DataTables_Table_0_wrapper\",\n                    className: \"dataTables_wrapper dt-bootstrap4 no-footer\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"row\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"col-sm-12\",\n                        children: /*#__PURE__*/_jsxDEV(\"table\", {\n                          className: \"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\",\n                          style: {\n                            borderCollapse: \"collapse\",\n                            borderSpacing: \"0px 8px\",\n                            width: \"100%\"\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                              className: \"bg-transparent\",\n                              role: \"row\",\n                              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                                style: {\n                                  width: \"80px\"\n                                },\n                                className: \"sorting\",\n                                children: \"ID\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 120,\n                                columnNumber: 65\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                style: {\n                                  width: \"80px\"\n                                },\n                                className: \"sorting\",\n                                children: \"URL\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 121,\n                                columnNumber: 65\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                style: {\n                                  width: \"80px\"\n                                },\n                                className: \"sorting\",\n                                children: \"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 122,\n                                columnNumber: 65\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                style: {\n                                  width: \"80px\"\n                                },\n                                className: \"sorting\",\n                                children: \"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 123,\n                                columnNumber: 65\n                              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                                style: {\n                                  width: \"80px\"\n                                },\n                                className: \"sorting\",\n                                children: \"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 124,\n                                columnNumber: 65\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 119,\n                              columnNumber: 61\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 118,\n                            columnNumber: 57\n                          }, this), domains == null ? /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 127,\n                            columnNumber: 76\n                          }, this) : /*#__PURE__*/_jsxDEV(\"tbody\", {\n                            children: domains.map(domain => {\n                              domain.templateName = getTemplateById(domain.template_id);\n                              return /*#__PURE__*/_jsxDEV(TableItem, {\n                                domain: domain,\n                                fetchDomains: fetchDomains\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 131,\n                                columnNumber: 76\n                              }, this);\n                            })\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 127,\n                            columnNumber: 94\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 117,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 116,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 13\n  }, this);\n};\n\n_s(DomainsPage, \"/XndjH6wL6YZPfXqIz7VWD4vR0g=\", false, function () {\n  return [useNavigate];\n});\n\n_c = DomainsPage;\n\nclass DomainListPageContainer extends Component {\n  componentDidMount() {\n    this.props.fetchDomains(\"\", \"\", 15);\n  }\n\n  render() {\n    const {\n      domains,\n      cursor,\n      loading,\n      error,\n      fetchDomains,\n      fetchMore\n    } = this.props;\n\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(DomainsPage, {\n      domains: domains,\n      cursor: cursor,\n      loading: loading,\n      error: error,\n      fetchDomains: fetchDomains,\n      fetchMore: fetchMore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 16\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = _ref2 => {\n  let {\n    domainsList: {\n      domains,\n      cursor,\n      loading,\n      error\n    }\n  } = _ref2;\n  return {\n    domains,\n    cursor,\n    loading,\n    error\n  };\n};\n\nconst mapDispatchToProps = (dispatch, _ref3) => {\n  let {\n    apiService\n  } = _ref3;\n  return bindActionCreators({\n    fetchDomains: fetchDomains(apiService),\n    fetchMore: fetchMore(apiService)\n  }, dispatch);\n};\n\nexport default compose(withApiService(), connect(mapStateToProps, mapDispatchToProps))(DomainListPageContainer);\n\nvar _c;\n\n$RefreshReg$(_c, \"DomainsPage\");","map":{"version":3,"sources":["/Users/laurkankusu/Documents/development/domains-server/plans/src/components/pages/domains/list/domains-page.js"],"names":["PageTitle","TableItem","compose","withApiService","connect","bindActionCreators","Component","useEffect","useRef","useState","fetchDomains","fetchMore","Spinner","useNavigate","Modals","showModal","ApiService","toast","BottomScrollListener","DomainsPage","domains","cursor","loading","templates","setTemplates","load","setLoad","search","setSearch","editDomain","setEditDomain","navigate","getTemplateById","id","name","map","template","ID","Name","forms","title","url","type","action","console","log","fields","json","edit","date","clear","question","display","justifyContent","replace","borderCollapse","borderSpacing","width","domain","templateName","template_id","DomainListPageContainer","componentDidMount","props","render","error","mapStateToProps","domainsList","mapDispatchToProps","dispatch","apiService"],"mappings":"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","sourcesContent":["import PageTitle from \"../../../page-title\"\nimport TableItem from \"./table-item\"\nimport { compose } from \"../../../../utils\";\nimport { withApiService } from \"../../../hoc\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport { Component, useEffect, useRef, useState } from \"react\";\nimport { fetchDomains, fetchMore } from \"../../../../actions/domains\";\nimport { Spinner } from \"../../../spinner\";\nimport { useNavigate } from \"react-router-dom\"\nimport { Modals, showModal } from \"../../../modals\"\nimport ApiService from \"../../../../services/api-service\";\nimport { toast } from \"react-toastify\";\nimport { BottomScrollListener } from 'react-bottom-scroll-listener';\n\nconst DomainsPage = ({ domains, cursor, loading, fetchDomains, fetchMore }) => {\n    const [templates, setTemplates] = useState(null)\n    const [load, setLoad] = useState(false)\n    const [search, setSearch] = useState(\"\")\n    const [editDomain, setEditDomain] = useState({})\n    const navigate = useNavigate();\n\n    const getTemplateById = (id) => {\n        let name = \"\"\n        if (templates != null) {\n            templates.map(template => {\n                if (template.ID == id) {\n                    name = template.Name\n                }\n            });\n        }\n        return name\n    }\n\n    const forms = [\n        {\n            title: 'Добавить домен',\n            name: 'addTitle',\n            url:\"/api/titles/\",\n            type: \"put\",\n            action: (action) => {console.log('need to close modal'); fetchDomains()},\n            fields: [\n                {\n                    name: 'Title',\n                    json: 'title',\n                    type: 'text',\n                },\n            ],\n        },\n        {\n            title: 'Редактировать тайтл',\n            name: 'updateTitle',\n            url: \"/api/titles/\",\n            type: \"post\",\n            action: (action) => {console.log(action); fetchDomains()},\n            edit: (action) => { setEditDomain(action)},\n            //imageurl:\"public/objects/\"+activeObject.ID+\"/actions/\", //id\n            date: editDomain,\n            clear:false,\n            fields: [\n                {\n                    name: 'Title',\n                    json: 'title',\n                    type: 'text',\n                },\n                {\n                    json: 'ID',\n                    type: 'hidden',\n                },\n            ],\n        },\n        {\n            title: 'Удалить тайтл',\n            question: 'Вы действительно хотите удалить тайтл?',\n            name: 'deleteTitle',\n            url:\"/api/titles/\"+editDomain.ID,\n            type: \"delete\",\n            action: (action) => { console.log(action); fetchDomains()},\n            //edit: () => {},\n            date: editDomain,\n            clear:false,\n            fields: [\n                {\n                json: 'ID',\n                type: 'hidden',\n                },\n            ]\n        },\n      ]\n\n    return (<div className=\"main-content\">\n        <div className=\"page-content\">\n            <div className=\"container-fluid\">\n                <PageTitle title={\"Список доменов\"} />\n                <div className=\"row\">\n                    <div className=\"col-lg-12\">\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <div className=\"\" style={{ display: \"flex\", justifyContent: \"end\" }}>\n                                    <div className=\"mb-4\">\n                                        <button onClick={() => { navigate('/add', { replace: false }) }} type=\"button\" className=\"btn btn-primary waves-effect waves-light\"><i className=\"feather-plus\"></i> Добавить домен</button>\n                                    </div>\n                                </div>\n                                <div className=\"table-responsive\">\n                                    <div id=\"DataTables_Table_0_wrapper\" className=\"dataTables_wrapper dt-bootstrap4 no-footer\">\n                                        {/*<div className=\"row\">\n                                            <div className=\"col-sm-12 col-md-6\">\n                                            </div>\n                                            <div className=\"col-sm-12 col-md-6\">\n                                                <div id=\"DataTables_Table_0_filter\" className=\"dataTables_filter\">\n                                                    <label>Поиск:<input onChange={searchDomains} type=\"search\" className=\"form-control form-control-sm\" placeholder=\"\" aria-controls=\"DataTables_Table_0\" /></label>\n                                                </div>\n                                            </div>\n                                        </div>*/}\n                                        <div className=\"row\">\n                                                <div className=\"col-sm-12\">\n                                                    <table className=\"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\" style={{ borderCollapse: \"collapse\", borderSpacing: \"0px 8px\", width: \"100%\" }} >\n                                                        <thead>\n                                                            <tr className=\"bg-transparent\" role=\"row\">\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >ID</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >URL</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Шаблон</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Дата создания</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Действия</th>\n                                                            </tr>\n                                                        </thead>\n                                                        {domains == null ? <tbody></tbody> : <tbody>\n                                                            {\n                                                                domains.map((domain) => {\n                                                                    domain.templateName = getTemplateById(domain.template_id)\n                                                                    return <TableItem domain={domain} fetchDomains={fetchDomains} />\n                                                                })\n                                                            }\n                                                        </tbody>}\n                                                    </table>\n                                                </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n    )\n}\n\n\nclass DomainListPageContainer extends Component {\n\n    componentDidMount() {\n        this.props.fetchDomains(\"\", \"\", 15);\n    }\n\n    render() {\n        const { domains, cursor, loading, error, fetchDomains, fetchMore } = this.props;\n        if (loading) {\n            return <Spinner />\n        }\n        return <DomainsPage domains={domains} cursor={cursor} loading={loading} error={error} fetchDomains={fetchDomains} fetchMore={fetchMore} />;\n    }\n}\n\nconst mapStateToProps = ({ domainsList: { domains, cursor, loading, error } }) => {\n    return { domains, cursor, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { apiService }) => {\n    return bindActionCreators({\n        fetchDomains: fetchDomains(apiService),\n        fetchMore: fetchMore(apiService)\n    }, dispatch);\n};\n\nexport default compose(\n    withApiService(),\n    connect(mapStateToProps, mapDispatchToProps)\n)(DomainListPageContainer);"]},"metadata":{},"sourceType":"module"}