{"ast":null,"code":"import _classCallCheck from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PageTitle from\"../../../page-title\";import TableItem from\"./table-item\";import{compose}from\"../../../../utils\";import{withApiService}from\"../../../hoc\";import{connect}from\"react-redux\";import{bindActionCreators}from'redux';import{Component,useEffect,useRef,useState}from\"react\";import{fetchDomains,fetchMore}from\"../../../../actions/domains\";import{Spinner}from\"../../../spinner\";import{useNavigate}from\"react-router-dom\";import ApiService from\"../../../../services/api-service\";import{toast}from\"react-toastify\";import{BottomScrollListener}from'react-bottom-scroll-listener';import{Modals}from\"../../../modals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DomainsPage=function DomainsPage(_ref){var domains=_ref.domains,cursor=_ref.cursor,loading=_ref.loading,fetchDomains=_ref.fetchDomains,fetchMore=_ref.fetchMore;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),templates=_useState2[0],setTemplates=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),copyID=_useState8[0],setCopyID=_useState8[1];var navigate=useNavigate();useEffect(function(){var apiService=new ApiService();apiService.templatesList().then(function(response){setTemplates(response.data);});},[]);var getTemplateById=function getTemplateById(id){var name=\"\";if(templates!=null){templates.map(function(template){if(template.ID==id){name=template.Name;}});}return name;};var onBottom=function onBottom(){if(load===false&&loading===false){setLoad(true);fetchMore(search,cursor,15);setTimeout(function(){setLoad(false);},1000);}};var searchDomains=function searchDomains(event){setSearch(event.target.value);fetchDomains(event.target.value,\"\",15);};var forms=[{title:'Копировать домен',name:'copyDomain',url:\"/api/domains/copy\",type:\"post\",action:function action(_action){fetchDomains(\"\",\"\",15);},fields:[{name:'URL',json:'url',type:'text'},{json:'ID',type:'hidden',value:copyID}]}];return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(PageTitle,{title:\"Список доменов\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{display:\"flex\",justifyContent:\"end\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){navigate('/add',{replace:false});},type:\"button\",className:\"btn btn-primary waves-effect waves-light\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"feather-plus\"}),\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u043E\\u043C\\u0435\\u043D\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"DataTables_Table_0_wrapper\",className:\"dataTables_wrapper dt-bootstrap4 no-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{id:\"DataTables_Table_0_filter\",className:\"dataTables_filter\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041F\\u043E\\u0438\\u0441\\u043A:\",/*#__PURE__*/_jsx(\"input\",{onChange:searchDomains,type:\"search\",className:\"form-control form-control-sm\",placeholder:\"\",\"aria-controls\":\"DataTables_Table_0\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(BottomScrollListener,{offset:20,onBottom:onBottom,children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\",style:{borderCollapse:\"collapse\",borderSpacing:\"0px 8px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-transparent\",role:\"row\",children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"30px\"},className:\"sorting sorting_asc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check font-size-16\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"check\",className:\"form-check-input\",id:\"checkAll\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"checkAll\"})]})}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"80px\"},className:\"sorting\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"80px\"},className:\"sorting\",children:\"URL\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"80px\"},className:\"sorting\",children:\"\\u0428\\u0430\\u0431\\u043B\\u043E\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"80px\"},className:\"sorting\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"80px\"},className:\"sorting\",children:\"\\u0414\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044F\"})]})}),domains==null?/*#__PURE__*/_jsx(\"tbody\",{}):/*#__PURE__*/_jsx(\"tbody\",{children:domains.map(function(domain){domain.templateName=getTemplateById(domain.template_id);return/*#__PURE__*/_jsx(TableItem,{domain:domain,fetchDomains:fetchDomains,setCopyID:setCopyID});})})]})})})})]})})]})})})})]})}),/*#__PURE__*/_jsx(Modals,{forms:forms})]});};var DomainListPageContainer=/*#__PURE__*/function(_Component){_inherits(DomainListPageContainer,_Component);var _super=_createSuper(DomainListPageContainer);function DomainListPageContainer(){_classCallCheck(this,DomainListPageContainer);return _super.apply(this,arguments);}_createClass(DomainListPageContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.fetchDomains(\"\",\"\",15);}},{key:\"render\",value:function render(){var _this$props=this.props,domains=_this$props.domains,cursor=_this$props.cursor,loading=_this$props.loading,error=_this$props.error,fetchDomains=_this$props.fetchDomains,fetchMore=_this$props.fetchMore;if(loading){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsx(DomainsPage,{domains:domains,cursor:cursor,loading:loading,error:error,fetchDomains:fetchDomains,fetchMore:fetchMore});}}]);return DomainListPageContainer;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var _ref2$domainsList=_ref2.domainsList,domains=_ref2$domainsList.domains,cursor=_ref2$domainsList.cursor,loading=_ref2$domainsList.loading,error=_ref2$domainsList.error;return{domains:domains,cursor:cursor,loading:loading,error:error};};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var apiService=_ref3.apiService;return bindActionCreators({fetchDomains:fetchDomains(apiService),fetchMore:fetchMore(apiService)},dispatch);};export default compose(withApiService(),connect(mapStateToProps,mapDispatchToProps))(DomainListPageContainer);","map":{"version":3,"sources":["/Users/laurkankusu/Documents/development/domains-server/admin/src/components/pages/domains/list/domains-page.js"],"names":["PageTitle","TableItem","compose","withApiService","connect","bindActionCreators","Component","useEffect","useRef","useState","fetchDomains","fetchMore","Spinner","useNavigate","ApiService","toast","BottomScrollListener","Modals","DomainsPage","domains","cursor","loading","templates","setTemplates","load","setLoad","search","setSearch","copyID","setCopyID","navigate","apiService","templatesList","then","response","data","getTemplateById","id","name","map","template","ID","Name","onBottom","setTimeout","searchDomains","event","target","value","forms","title","url","type","action","fields","json","display","justifyContent","replace","borderCollapse","borderSpacing","width","domain","templateName","template_id","DomainListPageContainer","props","error","mapStateToProps","domainsList","mapDispatchToProps","dispatch"],"mappings":"+sBAAA,MAAOA,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,OAASC,OAAT,KAAwB,mBAAxB,CACA,OAASC,cAAT,KAA+B,cAA/B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,SAAT,CAAoBC,SAApB,CAA+BC,MAA/B,CAAuCC,QAAvC,KAAuD,OAAvD,CACA,OAASC,YAAT,CAAuBC,SAAvB,KAAwC,6BAAxC,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,UAAP,KAAuB,kCAAvB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,oBAAT,KAAqC,8BAArC,CACA,OAASC,MAAT,KAAuB,iBAAvB,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAA2D,IAAxDC,CAAAA,OAAwD,MAAxDA,OAAwD,CAA/CC,MAA+C,MAA/CA,MAA+C,CAAvCC,OAAuC,MAAvCA,OAAuC,CAA9BX,YAA8B,MAA9BA,YAA8B,CAAhBC,SAAgB,MAAhBA,SAAgB,CAC3E,cAAkCF,QAAQ,CAAC,IAAD,CAA1C,wCAAOa,SAAP,eAAkBC,YAAlB,eACA,eAAwBd,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,eAA4BhB,QAAQ,CAAC,EAAD,CAApC,yCAAOiB,MAAP,eAAeC,SAAf,eACA,eAA4BlB,QAAQ,EAApC,yCAAOmB,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,QAAQ,CAAGjB,WAAW,EAA5B,CACAN,SAAS,CAAC,UAAM,CACZ,GAAIwB,CAAAA,UAAU,CAAG,GAAIjB,CAAAA,UAAJ,EAAjB,CACAiB,UAAU,CAACC,aAAX,GAA2BC,IAA3B,CAAgC,SAACC,QAAD,CAAc,CAC1CX,YAAY,CAACW,QAAQ,CAACC,IAAV,CAAZ,CACH,CAFD,EAGH,CALQ,CAKN,EALM,CAAT,CAOA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,EAAD,CAAQ,CAC5B,GAAIC,CAAAA,IAAI,CAAG,EAAX,CACA,GAAIhB,SAAS,EAAI,IAAjB,CAAuB,CACnBA,SAAS,CAACiB,GAAV,CAAc,SAAAC,QAAQ,CAAI,CACtB,GAAIA,QAAQ,CAACC,EAAT,EAAeJ,EAAnB,CAAuB,CACnBC,IAAI,CAAGE,QAAQ,CAACE,IAAhB,CACH,CACJ,CAJD,EAKH,CACD,MAAOJ,CAAAA,IAAP,CACH,CAVD,CAYA,GAAMK,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAInB,IAAI,GAAK,KAAT,EAAkBH,OAAO,GAAK,KAAlC,CAAyC,CACrCI,OAAO,CAAC,IAAD,CAAP,CACAd,SAAS,CAACe,MAAD,CAASN,MAAT,CAAiB,EAAjB,CAAT,CACAwB,UAAU,CAAC,UAAM,CACbnB,OAAO,CAAC,KAAD,CAAP,CACH,CAFS,CAEP,IAFO,CAAV,CAGH,CACJ,CARD,CAUA,GAAMoB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,CAC7BnB,SAAS,CAACmB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAT,CACAtC,YAAY,CAACoC,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAqB,EAArB,CAAyB,EAAzB,CAAZ,CACH,CAHD,CAKA,GAAMC,CAAAA,KAAK,CAAG,CACV,CACIC,KAAK,CAAE,kBADX,CAEIZ,IAAI,CAAE,YAFV,CAGIa,GAAG,CAAE,mBAHT,CAIIC,IAAI,CAAE,MAJV,CAKIC,MAAM,CAAE,gBAACA,OAAD,CAAY,CAAE3C,YAAY,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAAZ,CAA0B,CALpD,CAMI4C,MAAM,CAAE,CACJ,CACIhB,IAAI,CAAE,KADV,CAEIiB,IAAI,CAAE,KAFV,CAGIH,IAAI,CAAE,MAHV,CADI,CAMJ,CACIG,IAAI,CAAE,IADV,CAEIH,IAAI,CAAE,QAFV,CAGIJ,KAAK,CAAEpB,MAHX,CANI,CANZ,CADU,CAAd,CAqBA,mBAAQ,aAAK,SAAS,CAAC,cAAf,wBACJ,YAAK,SAAS,CAAC,cAAf,uBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,KAAC,SAAD,EAAW,KAAK,CAAE,gBAAlB,EADJ,cAEI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,WAAf,uBACI,YAAK,SAAS,CAAC,MAAf,uBACI,aAAK,SAAS,CAAC,WAAf,wBACI,YAAK,SAAS,CAAC,EAAf,CAAkB,KAAK,CAAE,CAAE4B,OAAO,CAAE,MAAX,CAAmBC,cAAc,CAAE,KAAnC,CAAzB,uBACI,YAAK,SAAS,CAAC,MAAf,uBACI,gBAAQ,OAAO,CAAE,kBAAM,CAAE3B,QAAQ,CAAC,MAAD,CAAS,CAAE4B,OAAO,CAAE,KAAX,CAAT,CAAR,CAAsC,CAA/D,CAAiE,IAAI,CAAC,QAAtE,CAA+E,SAAS,CAAC,0CAAzF,wBAAoI,UAAG,SAAS,CAAC,cAAb,EAApI,sFADJ,EADJ,EADJ,cAMI,YAAK,SAAS,CAAC,kBAAf,uBACI,aAAK,EAAE,CAAC,4BAAR,CAAqC,SAAS,CAAC,4CAA/C,wBACI,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,oBAAf,EADJ,cAGI,YAAK,SAAS,CAAC,oBAAf,uBACI,YAAK,EAAE,CAAC,2BAAR,CAAoC,SAAS,CAAC,mBAA9C,uBACI,wEAAa,cAAO,QAAQ,CAAEb,aAAjB,CAAgC,IAAI,CAAC,QAArC,CAA8C,SAAS,CAAC,8BAAxD,CAAuF,WAAW,CAAC,EAAnG,CAAsG,gBAAc,oBAApH,EAAb,GADJ,EADJ,EAHJ,GADJ,cAUI,YAAK,SAAS,CAAC,KAAf,uBACI,KAAC,oBAAD,EAAsB,MAAM,CAAE,EAA9B,CAAkC,QAAQ,CAAEF,QAA5C,uBACI,YAAK,SAAS,CAAC,WAAf,uBACI,eAAO,SAAS,CAAC,iGAAjB,CAAmH,KAAK,CAAE,CAAEgB,cAAc,CAAE,UAAlB,CAA8BC,aAAa,CAAE,SAA7C,CAAwDC,KAAK,CAAE,MAA/D,CAA1H,wBACI,oCACI,YAAI,SAAS,CAAC,gBAAd,CAA+B,IAAI,CAAC,KAApC,wBACI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,qBAAxC,uBACI,aAAK,SAAS,CAAC,yBAAf,wBAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,OAA5B,CAAoC,SAAS,CAAC,kBAA9C,CAAiE,EAAE,CAAC,UAApE,EAFJ,cAGI,cAAO,SAAS,CAAC,kBAAjB,CAAoC,OAAO,CAAC,UAA5C,EAHJ,GADJ,EADJ,cAQI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,SAAxC,gBARJ,cASI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,SAAxC,iBATJ,cAUI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,SAAxC,kDAVJ,cAWI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,SAAxC,uFAXJ,cAYI,WAAI,KAAK,CAAE,CAAEA,KAAK,CAAE,MAAT,CAAX,CAA8B,SAAS,CAAC,SAAxC,8DAZJ,GADJ,EADJ,CAiBK1C,OAAO,EAAI,IAAX,cAAkB,gBAAlB,cAAoC,uBAE7BA,OAAO,CAACoB,GAAR,CAAY,SAACuB,MAAD,CAAY,CACpBA,MAAM,CAACC,YAAP,CAAsB3B,eAAe,CAAC0B,MAAM,CAACE,WAAR,CAArC,CACA,mBAAO,KAAC,SAAD,EAAW,MAAM,CAAEF,MAAnB,CAA2B,YAAY,CAAEpD,YAAzC,CAAuD,SAAS,CAAEmB,SAAlE,EAAP,CACH,CAHD,CAF6B,EAjBzC,GADJ,EADJ,EADJ,EAVJ,GADJ,EANJ,GADJ,EADJ,EADJ,EAFJ,GADJ,EADI,cAgEJ,KAAC,MAAD,EAAQ,KAAK,CAAEoB,KAAf,EAhEI,GAAR,CAmEH,CAhID,C,GAmIMgB,CAAAA,uB,6TAEF,4BAAoB,CAChB,KAAKC,KAAL,CAAWxD,YAAX,CAAwB,EAAxB,CAA4B,EAA5B,CAAgC,EAAhC,EACH,C,sBAED,iBAAS,CACL,gBAAqE,KAAKwD,KAA1E,CAAQ/C,OAAR,aAAQA,OAAR,CAAiBC,MAAjB,aAAiBA,MAAjB,CAAyBC,OAAzB,aAAyBA,OAAzB,CAAkC8C,KAAlC,aAAkCA,KAAlC,CAAyCzD,YAAzC,aAAyCA,YAAzC,CAAuDC,SAAvD,aAAuDA,SAAvD,CACA,GAAIU,OAAJ,CAAa,CACT,mBAAO,KAAC,OAAD,IAAP,CACH,CACD,mBAAO,KAAC,WAAD,EAAa,OAAO,CAAEF,OAAtB,CAA+B,MAAM,CAAEC,MAAvC,CAA+C,OAAO,CAAEC,OAAxD,CAAiE,KAAK,CAAE8C,KAAxE,CAA+E,YAAY,CAAEzD,YAA7F,CAA2G,SAAS,CAAEC,SAAtH,EAAP,CACH,C,qCAZiCL,S,EAetC,GAAM8D,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,OAA0D,6BAAvDC,WAAuD,CAAxClD,OAAwC,mBAAxCA,OAAwC,CAA/BC,MAA+B,mBAA/BA,MAA+B,CAAvBC,OAAuB,mBAAvBA,OAAuB,CAAd8C,KAAc,mBAAdA,KAAc,CAC9E,MAAO,CAAEhD,OAAO,CAAPA,OAAF,CAAWC,MAAM,CAANA,MAAX,CAAmBC,OAAO,CAAPA,OAAnB,CAA4B8C,KAAK,CAALA,KAA5B,CAAP,CACH,CAFD,CAIA,GAAMG,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,OAA8B,IAAjBxC,CAAAA,UAAiB,OAAjBA,UAAiB,CACrD,MAAO1B,CAAAA,kBAAkB,CAAC,CACtBK,YAAY,CAAEA,YAAY,CAACqB,UAAD,CADJ,CAEtBpB,SAAS,CAAEA,SAAS,CAACoB,UAAD,CAFE,CAAD,CAGtBwC,QAHsB,CAAzB,CAIH,CALD,CAOA,cAAerE,CAAAA,OAAO,CAClBC,cAAc,EADI,CAElBC,OAAO,CAACgE,eAAD,CAAkBE,kBAAlB,CAFW,CAAP,CAGbL,uBAHa,CAAf","sourcesContent":["import PageTitle from \"../../../page-title\"\nimport TableItem from \"./table-item\"\nimport { compose } from \"../../../../utils\";\nimport { withApiService } from \"../../../hoc\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport { Component, useEffect, useRef, useState } from \"react\";\nimport { fetchDomains, fetchMore } from \"../../../../actions/domains\";\nimport { Spinner } from \"../../../spinner\";\nimport { useNavigate } from \"react-router-dom\"\nimport ApiService from \"../../../../services/api-service\";\nimport { toast } from \"react-toastify\";\nimport { BottomScrollListener } from 'react-bottom-scroll-listener';\nimport { Modals } from \"../../../modals\";\n\nconst DomainsPage = ({ domains, cursor, loading, fetchDomains, fetchMore }) => {\n    const [templates, setTemplates] = useState(null)\n    const [load, setLoad] = useState(false)\n    const [search, setSearch] = useState(\"\")\n    const [copyID, setCopyID] = useState()\n    const navigate = useNavigate();\n    useEffect(() => {\n        let apiService = new ApiService\n        apiService.templatesList().then((response) => {\n            setTemplates(response.data)\n        })\n    }, [])\n\n    const getTemplateById = (id) => {\n        let name = \"\"\n        if (templates != null) {\n            templates.map(template => {\n                if (template.ID == id) {\n                    name = template.Name\n                }\n            });\n        }\n        return name\n    }\n\n    const onBottom = () => {\n        if (load === false && loading === false) {\n            setLoad(true)\n            fetchMore(search, cursor, 15)\n            setTimeout(() => {\n                setLoad(false)\n            }, 1000)\n        }\n    };\n\n    const searchDomains = (event) => {\n        setSearch(event.target.value)\n        fetchDomains(event.target.value, \"\", 15)\n    }\n\n    const forms = [\n        {\n            title: 'Копировать домен',\n            name: 'copyDomain',\n            url: \"/api/domains/copy\",\n            type: \"post\",\n            action: (action) => { fetchDomains(\"\", \"\", 15) },\n            fields: [\n                {\n                    name: 'URL',\n                    json: 'url',\n                    type: 'text',\n                },\n                {\n                    json: 'ID',\n                    type: 'hidden',\n                    value: copyID,\n                },\n            ],\n        },\n    ]\n    return (<div className=\"main-content\">\n        <div className=\"page-content\">\n            <div className=\"container-fluid\">\n                <PageTitle title={\"Список доменов\"} />\n                <div className=\"row\">\n                    <div className=\"col-lg-12\">\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <div className=\"\" style={{ display: \"flex\", justifyContent: \"end\" }}>\n                                    <div className=\"mb-4\">\n                                        <button onClick={() => { navigate('/add', { replace: false }) }} type=\"button\" className=\"btn btn-primary waves-effect waves-light\"><i className=\"feather-plus\"></i> Добавить домен</button>\n                                    </div>\n                                </div>\n                                <div className=\"table-responsive\">\n                                    <div id=\"DataTables_Table_0_wrapper\" className=\"dataTables_wrapper dt-bootstrap4 no-footer\">\n                                        <div className=\"row\">\n                                            <div className=\"col-sm-12 col-md-6\">\n                                            </div>\n                                            <div className=\"col-sm-12 col-md-6\">\n                                                <div id=\"DataTables_Table_0_filter\" className=\"dataTables_filter\">\n                                                    <label>Поиск:<input onChange={searchDomains} type=\"search\" className=\"form-control form-control-sm\" placeholder=\"\" aria-controls=\"DataTables_Table_0\" /></label>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"row\">\n                                            <BottomScrollListener offset={20} onBottom={onBottom} >\n                                                <div className=\"col-sm-12\">\n                                                    <table className=\"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\" style={{ borderCollapse: \"collapse\", borderSpacing: \"0px 8px\", width: \"100%\" }} >\n                                                        <thead>\n                                                            <tr className=\"bg-transparent\" role=\"row\">\n                                                                <th style={{ width: \"30px\" }} className=\"sorting sorting_asc\">\n                                                                    <div className=\"form-check\n                                                        font-size-16\">\n                                                                        <input type=\"checkbox\" name=\"check\" className=\"form-check-input\" id=\"checkAll\" />\n                                                                        <label className=\"form-check-label\" htmlFor=\"checkAll\"></label>\n                                                                    </div>\n                                                                </th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >ID</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >URL</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Шаблон</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Дата создания</th>\n                                                                <th style={{ width: \"80px\" }} className=\"sorting\" >Действия</th>\n                                                            </tr>\n                                                        </thead>\n                                                        {domains == null ? <tbody></tbody> : <tbody>\n                                                            {\n                                                                domains.map((domain) => {\n                                                                    domain.templateName = getTemplateById(domain.template_id)\n                                                                    return <TableItem domain={domain} fetchDomains={fetchDomains} setCopyID={setCopyID} />\n                                                                })\n                                                            }\n                                                        </tbody>}\n                                                    </table>\n                                                </div>\n                                            </ BottomScrollListener>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <Modals forms={forms} />\n    </div>\n    )\n}\n\n\nclass DomainListPageContainer extends Component {\n\n    componentDidMount() {\n        this.props.fetchDomains(\"\", \"\", 15);\n    }\n\n    render() {\n        const { domains, cursor, loading, error, fetchDomains, fetchMore } = this.props;\n        if (loading) {\n            return <Spinner />\n        }\n        return <DomainsPage domains={domains} cursor={cursor} loading={loading} error={error} fetchDomains={fetchDomains} fetchMore={fetchMore} />;\n    }\n}\n\nconst mapStateToProps = ({ domainsList: { domains, cursor, loading, error } }) => {\n    return { domains, cursor, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { apiService }) => {\n    return bindActionCreators({\n        fetchDomains: fetchDomains(apiService),\n        fetchMore: fetchMore(apiService)\n    }, dispatch);\n};\n\nexport default compose(\n    withApiService(),\n    connect(mapStateToProps, mapDispatchToProps)\n)(DomainListPageContainer);"]},"metadata":{},"sourceType":"module"}