{"ast":null,"code":"import _defineProperty from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StepsComponent=function StepsComponent(_ref){var quizSteps=_ref.quizSteps,setQuizSteps=_ref.setQuizSteps,city_id=_ref.city_id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),raions=_useState2[0],setRaions=_useState2[1];var inputChange=function inputChange(event){};var answerChange=function answerChange(event){var value=event.target.value;setQuizSteps(function(prevState){var stepindex=parseInt(event.target.getAttribute('indexstep'));var answerindex=parseInt(event.target.getAttribute('indexanswer'));var newQuizSteps=Array.from(prevState);newQuizSteps[stepindex].answers[answerindex]=value;if(answerindex==newQuizSteps[stepindex].answers.length-1&&value!=\"\"){newQuizSteps[stepindex].answers[answerindex+1]=\"\";}return newQuizSteps;});};var questionChange=function questionChange(event){var value=event.target.value;var stepindex=parseInt(event.target.getAttribute('indexstep'));setQuizSteps(function(prevState){var newQuizSteps=Array.from(prevState);newQuizSteps[stepindex].title=value;return newQuizSteps;});};var stepDelete=function stepDelete(stepID,answerID){setQuizSteps(function(prevState){var newQuizSteps=Array.from(prevState);newQuizSteps[stepID].answers.splice(answerID,1);return newQuizSteps;});};var addStep=function addStep(){setQuizSteps(function(prevState){var newQuizSteps=Array.from(prevState);newQuizSteps.push({title:\"\",type:\"text\",answers:[\"\"]});return newQuizSteps;});};var changeQuestionType=function changeQuestionType(event){var stepindex=parseInt(event.target.getAttribute('stepindex'));console.log(stepindex);setQuizSteps(function(prevState){var newQuizSteps=Array.from(prevState);newQuizSteps[stepindex].type=event.target.value;if(newQuizSteps[stepindex].type==\"text\"){newQuizSteps[stepindex].answers=[\"\"];}return newQuizSteps;});};var sliderParamChange=function sliderParamChange(event){var index=parseInt(event.target.getAttribute('indexstep'));if(event.target.value[event.target.value.length-1]%1===0||event.target.value[event.target.value.length-1]===\",\"){setQuizSteps(function(prevState){var newQuizSteps=Array.from(prevState);newQuizSteps[index]=_objectSpread(_objectSpread({},newQuizSteps[index]),{},_defineProperty({},event.target.name,event.target.value));return newQuizSteps;});}};var getCityRaions=function getCityRaions(){axios.get(\"/api/locations/raions/\"+city_id).then(function(resp){setRaions(resp.data.payload);});};useEffect(function(){getCityRaions();},[city_id]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-4\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"\\u0428\\u0430\\u0433\\u0438\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-title-desc\",children:\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u0448\\u0430\\u0433\\u0438 (\\u0435\\u0441\\u043B\\u0438 \\u043D\\u0438 \\u043E\\u0434\\u0438\\u043D \\u0448\\u0430\\u0433 \\u043D\\u0435 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D, \\u0442\\u043E \\u0431\\u0443\\u0434\\u0443\\u0442 \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B, \\u0441\\u0442\\u0430\\u043D\\u0434\\u0440\\u0430\\u0442\\u043D\\u044B\\u0435)\"})]}),quizSteps.map(function(step,i){var _jsxs2;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[\"\\u0428\\u0430\\u0433 \",i+1,\" / \",quizSteps.length]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"basicpill-servicetax-input\",className:\"form-label\",children:\"\\u0422\\u0435\\u043A\\u0441\\u0442 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",indexstep:i,onChange:questionChange,className:\"form-control\",name:\"mail\",id:\"basicpill-servicetax-input\",value:step.title})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"basicpill-servicetax-input\",className:\"form-label\",children:\"\\u0422\\u0438\\u043F \\u0448\\u0430\\u0433\\u0430\"}),/*#__PURE__*/_jsxs(\"select\",(_jsxs2={onChange:changeQuestionType,stepindex:i,className:\"form-select custom-select\",id:\"template\",name:\"template_id\"},_defineProperty(_jsxs2,\"name\",\"qoopler\"),_defineProperty(_jsxs2,\"value\",step.type),_defineProperty(_jsxs2,\"children\",[/*#__PURE__*/_jsx(\"option\",{value:\"text\",children:\"\\u0422\\u0435\\u043A\\u0441\\u0442\\u043E\\u0432\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"slider\",children:\"\\u0421\\u043B\\u0430\\u0439\\u0434\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"option\",{value:\"raions\",children:\"\\u0420\\u0430\\u0439\\u043E\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rooms\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043A\\u043E\\u043C\\u043D\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"option\",{value:\"slider_r\",children:\"\\u0421\\u043B\\u0430\\u0439\\u0434\\u0435\\u0440 (\\u0446\\u0435\\u043D\\u044B \\u0438\\u0437 \\u0440\\u0430\\u0439\\u043E\\u043D\\u0430)\"})]),_jsxs2))]})})]}),step.type==\"text\"?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",style:{marginLeft:\"15px\"},children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u044B \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"})}),step.answers.map(function(answer,index){return/*#__PURE__*/_jsx(\"div\",{className:\"column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 ml-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",style:{display:\"flex\",marginLeft:\"30px\",alignItems:\"center\"},children:[index+1,\".  \",/*#__PURE__*/_jsx(\"input\",{style:{marginLeft:\"10px\",marginRight:\"10px\"},type:\"text\",autoComplete:\"off\",onChange:answerChange,indexanswer:index,indexstep:i,className:\"form-control\",name:\"mail\",id:\"basicpill-servicetax-input\",value:answer}),\" \",step.answers.length>1?/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){stepDelete(i,index);},className:\"feather-trash\",style:{color:\"red\"}}):\"\"]})})},i);})]}):step.type==\"raions\"?/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0420\\u0430\\u0439\\u043E\\u043D\\u044B \\u0433\\u043E\\u0440\\u043E\\u0434\\u0430\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:raions.map(function(raion){return raion.Name+\", \";})})]}):step.type==\"slider_r\"?/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0421\\u043B\\u0430\\u0439\\u0434\\u0435\\u0440 \\u043F\\u043E\\u0434\\u0442\\u044F\\u043D\\u0435\\u0442 \\u0446\\u0435\\u043D\\u044B \\u043F\\u043E \\u0440\\u0430\\u0439\\u043E\\u043D\\u0430\\u043C, \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0437\\u0430\\u0434\\u0430\\u0432\\u0430\\u0442\\u044C \\u043D\\u0435 \\u043D\\u0443\\u0436\\u043D\\u043E, \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0442\\u0430\\u0439\\u0442\\u043B \\u0448\\u0430\\u0433\\u0430\"})})}):step.type==\"rooms\"?/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0428\\u0430\\u0433 \\u0432\\u044B\\u0431\\u043E\\u0440\\u0430 \\u043A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043A\\u043E\\u043C\\u043D\\u0430\\u0442\"})})}):/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u0441\\u043B\\u0430\\u0439\\u0434\\u0435\\u0440\\u0430\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"basicpill-servicetax-input\",className:\"form-label\",children:\"\\u041E\\u0442\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",indexstep:i,onChange:sliderParamChange,name:\"from\",value:step.from,className:\"form-control\",id:\"basicpill-servicetax-input\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"basicpill-servicetax-input\",className:\"form-label\",children:\"\\u0414\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",indexstep:i,onChange:sliderParamChange,name:\"to\",value:step.to,className:\"form-control\",id:\"basicpill-servicetax-input\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"basicpill-servicetax-input\",className:\"form-label\",children:\"\\u0428\\u0430\\u0433\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",indexstep:i,onChange:sliderParamChange,name:\"step\",value:step.step,className:\"form-control\",id:\"basicpill-servicetax-input\"})]})})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"})]},i);}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:addStep,children:[/*#__PURE__*/_jsx(\"i\",{className:\"feather-plus\"}),\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0448\\u0430\\u0433 \"]})})]});};export default StepsComponent;","map":{"version":3,"sources":["/Users/laurkankusu/Documents/development/domains-server/admin/src/components/pages/domains/edit/steps/steps.js"],"names":["axios","React","useEffect","useState","StepsComponent","quizSteps","setQuizSteps","city_id","raions","setRaions","inputChange","event","answerChange","value","target","prevState","stepindex","parseInt","getAttribute","answerindex","newQuizSteps","Array","from","answers","length","questionChange","title","stepDelete","stepID","answerID","splice","addStep","push","type","changeQuestionType","console","log","sliderParamChange","index","name","getCityRaions","get","then","resp","data","payload","map","step","i","marginLeft","answer","display","alignItems","marginRight","color","raion","Name","to"],"mappings":"0bAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,C,wFAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAwC,IAAtCC,CAAAA,SAAsC,MAAtCA,SAAsC,CAA3BC,YAA2B,MAA3BA,YAA2B,CAAbC,OAAa,MAAbA,OAAa,CAC3D,cAA4BJ,QAAQ,CAAC,EAAD,CAApC,wCAAOK,MAAP,eAAeC,SAAf,eACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC9B,CADD,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACD,KAAD,CAAW,CAC5B,GAAIE,CAAAA,KAAK,CAAGF,KAAK,CAACG,MAAN,CAAaD,KAAzB,CACAP,YAAY,CAAC,SAACS,SAAD,CAAe,CACxB,GAAIC,CAAAA,SAAS,CAAGC,QAAQ,CAACN,KAAK,CAACG,MAAN,CAAaI,YAAb,CAA0B,WAA1B,CAAD,CAAxB,CACA,GAAIC,CAAAA,WAAW,CAAGF,QAAQ,CAACN,KAAK,CAACG,MAAN,CAAaI,YAAb,CAA0B,aAA1B,CAAD,CAA1B,CACA,GAAIE,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACJ,SAAD,CAAZ,CAAwBO,OAAxB,CAAgCJ,WAAhC,EAA+CN,KAA/C,CACA,GAAIM,WAAW,EAAIC,YAAY,CAACJ,SAAD,CAAZ,CAAwBO,OAAxB,CAAgCC,MAAhC,CAAuC,CAAtD,EAA2DX,KAAK,EAAE,EAAtE,CAA0E,CACtEO,YAAY,CAACJ,SAAD,CAAZ,CAAwBO,OAAxB,CAAgCJ,WAAW,CAAC,CAA5C,EAA+C,EAA/C,CACH,CACD,MAAOC,CAAAA,YAAP,CACH,CATW,CAAZ,CAUH,CAZD,CAcA,GAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACd,KAAD,CAAW,CAC9B,GAAIE,CAAAA,KAAK,CAAGF,KAAK,CAACG,MAAN,CAAaD,KAAzB,CACA,GAAIG,CAAAA,SAAS,CAAGC,QAAQ,CAACN,KAAK,CAACG,MAAN,CAAaI,YAAb,CAA0B,WAA1B,CAAD,CAAxB,CAEAZ,YAAY,CAAC,SAACS,SAAD,CAAc,CACvB,GAAIK,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACJ,SAAD,CAAZ,CAAwBU,KAAxB,CAAgCb,KAAhC,CACA,MAAOO,CAAAA,YAAP,CACH,CAJW,CAAZ,CAKH,CATD,CAWA,GAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,MAAD,CAASC,QAAT,CAAsB,CACrCvB,YAAY,CAAC,SAACS,SAAD,CAAe,CACxB,GAAIK,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACQ,MAAD,CAAZ,CAAqBL,OAArB,CAA6BO,MAA7B,CAAoCD,QAApC,CAA8C,CAA9C,EACA,MAAOT,CAAAA,YAAP,CACH,CAJW,CAAZ,CAKH,CAND,CAQA,GAAMW,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CAClBzB,YAAY,CAAC,SAACS,SAAD,CAAe,CACxB,GAAIK,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACY,IAAb,CAAkB,CACdN,KAAK,CAAE,EADO,CAEdO,IAAI,CAAE,MAFQ,CAGdV,OAAO,CAAE,CACL,EADK,CAHK,CAAlB,EAOA,MAAOH,CAAAA,YAAP,CACH,CAVW,CAAZ,CAWH,CAZD,CAcA,GAAMc,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACvB,KAAD,CAAW,CAClC,GAAIK,CAAAA,SAAS,CAAGC,QAAQ,CAACN,KAAK,CAACG,MAAN,CAAaI,YAAb,CAA0B,WAA1B,CAAD,CAAxB,CACAiB,OAAO,CAACC,GAAR,CAAYpB,SAAZ,EACAV,YAAY,CAAC,SAACS,SAAD,CAAe,CACxB,GAAIK,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACJ,SAAD,CAAZ,CAAwBiB,IAAxB,CAA+BtB,KAAK,CAACG,MAAN,CAAaD,KAA5C,CACA,GAAIO,YAAY,CAACJ,SAAD,CAAZ,CAAwBiB,IAAxB,EAAgC,MAApC,CAA4C,CACxCb,YAAY,CAACJ,SAAD,CAAZ,CAAwBO,OAAxB,CAAkC,CAAC,EAAD,CAAlC,CACH,CACD,MAAOH,CAAAA,YAAP,CACH,CAPW,CAAZ,CAQH,CAXD,CAaA,GAAMiB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAC1B,KAAD,CAAW,CACjC,GAAI2B,CAAAA,KAAK,CAAGrB,QAAQ,CAACN,KAAK,CAACG,MAAN,CAAaI,YAAb,CAA0B,WAA1B,CAAD,CAApB,CACA,GAAIP,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBF,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBW,MAAnB,CAA0B,CAA7C,EAAiD,CAAjD,GAAuD,CAAvD,EAA4Db,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBF,KAAK,CAACG,MAAN,CAAaD,KAAb,CAAmBW,MAAnB,CAA0B,CAA7C,IAAoD,GAApH,CAAyH,CAEzHlB,YAAY,CAAC,SAACS,SAAD,CAAe,CACxB,GAAIK,CAAAA,YAAY,CAAGC,KAAK,CAACC,IAAN,CAAWP,SAAX,CAAnB,CACAK,YAAY,CAACkB,KAAD,CAAZ,gCACOlB,YAAY,CAACkB,KAAD,CADnB,wBAEK3B,KAAK,CAACG,MAAN,CAAayB,IAFlB,CAEwB5B,KAAK,CAACG,MAAN,CAAaD,KAFrC,GAIA,MAAOO,CAAAA,YAAP,CACH,CAPW,CAAZ,CAOG,CACN,CAZD,CAcA,GAAMoB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxBxC,KAAK,CAACyC,GAAN,CAAU,yBAAyBlC,OAAnC,EAA4CmC,IAA5C,CAAiD,SAACC,IAAD,CAAU,CACvDlC,SAAS,CAACkC,IAAI,CAACC,IAAL,CAAUC,OAAX,CAAT,CACH,CAFD,EAGH,CAJD,CAMA3C,SAAS,CAAC,UAAI,CACVsC,aAAa,GAChB,CAFQ,CAEP,CAACjC,OAAD,CAFO,CAAT,CAIA,mBAAQ,MAAC,KAAD,CAAO,QAAP,yBACJ,aAAK,SAAS,CAAC,kBAAf,wBACI,gDADJ,cAEI,UAAG,SAAS,CAAC,iBAAb,8cAFJ,GADI,CAOIF,SAAS,CAACyC,GAAV,CAAc,SAACC,IAAD,CAAOC,CAAP,CAAa,YACvB,mBAAO,MAAC,KAAD,CAAO,QAAP,yBAAwB,oCACnB,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,MAAf,iCACSA,CAAC,CAAC,CADX,OACiB3C,SAAS,CAACmB,MAD3B,GADJ,EADmB,cAMnB,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,4BAAf,CAA4C,SAAS,CAAC,YAAtD,uFADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAEwB,CAA9B,CAAiC,QAAQ,CAAEvB,cAA3C,CAA2D,SAAS,CAAC,cAArE,CAAoF,IAAI,CAAC,MAAzF,CAAgG,EAAE,CAAC,4BAAnG,CAAgI,KAAK,CAAEsB,IAAI,CAACrB,KAA5I,EAFJ,GADJ,EADJ,cAOI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,4BAAf,CAA4C,SAAS,CAAC,YAAtD,yDADJ,cAEI,wBAAQ,QAAQ,CAAEQ,kBAAlB,CAAsC,SAAS,CAAEc,CAAjD,CAAoD,SAAS,CAAC,2BAA9D,CAA0F,EAAE,CAAC,UAA7F,CAAwG,IAAI,CAAC,aAA7G,gCAAgI,SAAhI,iCAAiJD,IAAI,CAACd,IAAtJ,kDACI,eAAQ,KAAK,CAAC,MAAd,oEADJ,cAEI,eAAQ,KAAK,CAAC,QAAd,wDAFJ,cAGI,eAAQ,KAAK,CAAC,QAAd,kDAHJ,cAII,eAAQ,KAAK,CAAC,OAAd,+GAJJ,cAKI,eAAQ,KAAK,CAAC,UAAd,qIALJ,WAFJ,GADJ,EAPJ,GANmB,CA2BlBc,IAAI,CAACd,IAAL,EAAa,MAAb,cAAqB,MAAC,KAAD,CAAO,QAAP,yBACd,YAAK,SAAS,CAAC,MAAf,CAAsB,KAAK,CAAE,CAACgB,UAAU,CAAC,MAAZ,CAA7B,uBACI,gHADJ,EADc,CAIbF,IAAI,CAACxB,OAAL,CAAauB,GAAb,CAAiB,SAACI,MAAD,CAASZ,KAAT,CAAmB,CACrC,mBAAO,YAAa,SAAS,CAAC,QAAvB,uBACC,YAAK,SAAS,CAAC,eAAf,uBACI,aAAK,SAAS,CAAC,MAAf,CAAsB,KAAK,CAAE,CAACa,OAAO,CAAC,MAAT,CAAiBF,UAAU,CAAC,MAA5B,CAAoCG,UAAU,CAAC,QAA/C,CAA7B,WACKd,KAAK,CAAC,CADX,oBACgB,cAAO,KAAK,CAAE,CAACW,UAAU,CAAC,MAAZ,CAAoBI,WAAW,CAAC,MAAhC,CAAd,CAAuD,IAAI,CAAC,MAA5D,CAAmE,YAAY,CAAC,KAAhF,CAAsF,QAAQ,CAAEzC,YAAhG,CAA8G,WAAW,CAAE0B,KAA3H,CAAkI,SAAS,CAAEU,CAA7I,CAAgJ,SAAS,CAAC,cAA1J,CAAyK,IAAI,CAAC,MAA9K,CAAqL,EAAE,CAAC,4BAAxL,CAAqN,KAAK,CAAEE,MAA5N,EADhB,KACyPH,IAAI,CAACxB,OAAL,CAAaC,MAAb,CAAoB,CAApB,cAAsB,UAAG,OAAO,CAAE,kBAAM,CAACG,UAAU,CAACqB,CAAD,CAAIV,KAAJ,CAAV,CAAqB,CAAxC,CAA0C,SAAS,CAAC,eAApD,CAAoE,KAAK,CAAE,CAACgB,KAAK,CAAC,KAAP,CAA3E,EAAtB,CAAmH,EAD5W,GADJ,EADD,EAAUN,CAAV,CAAP,CAMW,CAPV,CAJa,GAArB,CAeID,IAAI,CAACd,IAAL,EAAa,QAAb,cAAsB,MAAC,KAAD,CAAO,QAAP,yBAClB,YAAK,SAAS,CAAC,MAAf,uBACG,mGADH,EADkB,cAInB,YAAK,SAAS,CAAC,KAAf,UAEQzB,MAAM,CAACsC,GAAP,CAAW,SAACS,KAAD,CAAW,CAClB,MAAOA,CAAAA,KAAK,CAACC,IAAN,CAAW,IAAlB,CACH,CAFD,CAFR,EAJmB,GAAtB,CAWiBT,IAAI,CAACd,IAAL,EAAa,UAAb,cAAwB,KAAC,KAAD,CAAO,QAAP,wBACrC,YAAK,SAAS,CAAC,MAAf,uBACG,ybADH,EADqC,EAAxB,CAIAc,IAAI,CAACd,IAAL,EAAa,OAAb,cAAqB,KAAC,KAAD,CAAO,QAAP,wBAClC,YAAK,SAAS,CAAC,MAAf,uBACG,mLADH,EADkC,EAArB,cAIA,MAAC,KAAD,CAAO,QAAP,yBACd,YAAK,SAAS,CAAC,MAAf,uBACI,iIADJ,EADc,cAId,aAAK,SAAS,CAAC,KAAf,wBACI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,4BAAf,CAA4C,SAAS,CAAC,YAAtD,0BADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAEe,CAA9B,CAAiC,QAAQ,CAAEX,iBAA3C,CAA8D,IAAI,CAAC,MAAnE,CAA0E,KAAK,CAAEU,IAAI,CAACzB,IAAtF,CAA4F,SAAS,CAAC,cAAtG,CAAqH,EAAE,CAAC,4BAAxH,EAFJ,GADJ,EADJ,cAOI,YAAK,SAAS,CAAC,UAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,4BAAf,CAA4C,SAAS,CAAC,YAAtD,0BADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAE0B,CAA9B,CAAiC,QAAQ,CAAEX,iBAA3C,CAA8D,IAAI,CAAC,IAAnE,CAAwE,KAAK,CAAEU,IAAI,CAACU,EAApF,CAAwF,SAAS,CAAC,cAAlG,CAAiH,EAAE,CAAC,4BAApH,EAFJ,GADJ,EAPJ,GAJc,cAkBd,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,4BAAf,CAA4C,SAAS,CAAC,YAAtD,gCADJ,cAEI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAET,CAA9B,CAAiC,QAAQ,CAAEX,iBAA3C,CAA8D,IAAI,CAAC,MAAnE,CAA0E,KAAK,CAAEU,IAAI,CAACA,IAAtF,CAA4F,SAAS,CAAC,cAAtG,CAAqH,EAAE,CAAC,4BAAxH,EAFJ,GADJ,EAlBc,GA7DH,GAAxB,cAyFC,WAAI,SAAS,CAAC,MAAd,EAzFD,GAAqBC,CAArB,CAAP,CA2FH,CA5FD,CAPJ,cAqGJ,YAAK,SAAS,CAAC,+BAAf,uBACI,gBAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAEjB,OAA7C,wBAAsD,UAAG,SAAS,CAAC,cAAb,EAAtD,2EADJ,EArGI,GAAR,CAyGH,CAjMD,CAmMA,cAAe3B,CAAAA,cAAf","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\"\n\nconst StepsComponent = ({quizSteps, setQuizSteps, city_id}) => {\n    const [raions, setRaions] = useState([])\n    const inputChange = (event) => {\n    }\n    const answerChange = (event) => {\n        let value = event.target.value\n        setQuizSteps((prevState) => {\n            let stepindex = parseInt(event.target.getAttribute('indexstep'))\n            let answerindex = parseInt(event.target.getAttribute('indexanswer'))\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps[stepindex].answers[answerindex] = value\n            if (answerindex == newQuizSteps[stepindex].answers.length-1 && value!=\"\") {\n                newQuizSteps[stepindex].answers[answerindex+1]=\"\"\n            }\n            return newQuizSteps\n        })\n    }\n\n    const questionChange = (event) => {\n        let value = event.target.value\n        let stepindex = parseInt(event.target.getAttribute('indexstep'))\n              \n        setQuizSteps((prevState)=> {\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps[stepindex].title = value\n            return newQuizSteps\n        })\n    }\n\n    const stepDelete = (stepID, answerID) => {\n        setQuizSteps((prevState) => {\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps[stepID].answers.splice(answerID, 1)\n            return newQuizSteps\n        })\n    }\n\n    const addStep = () => {\n        setQuizSteps((prevState) => {\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps.push({\n                title: \"\",\n                type: \"text\",\n                answers: [\n                    \"\"\n                ]})\n            \n            return newQuizSteps\n        })\n    }\n\n    const changeQuestionType = (event) => {\n        let stepindex = parseInt(event.target.getAttribute('stepindex'))\n        console.log(stepindex)\n        setQuizSteps((prevState) => {\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps[stepindex].type = event.target.value\n            if (newQuizSteps[stepindex].type == \"text\") {\n                newQuizSteps[stepindex].answers = [\"\"]\n            }\n            return newQuizSteps\n        })\n    }\n\n    const sliderParamChange = (event) => {\n        let index = parseInt(event.target.getAttribute('indexstep'))\n        if (event.target.value[event.target.value.length-1] %1 === 0 || event.target.value[event.target.value.length-1] === \",\") {\n           \n        setQuizSteps((prevState) => {\n            let newQuizSteps = Array.from(prevState)\n            newQuizSteps[index] = {\n                ...newQuizSteps[index],\n                [event.target.name]:event.target.value,\n            }\n            return newQuizSteps\n        })}\n    }\n\n    const getCityRaions = () => {\n        axios.get(\"/api/locations/raions/\"+city_id).then((resp) => {\n            setRaions(resp.data.payload)\n        })\n    }\n\n    useEffect(()=>{\n        getCityRaions()\n    },[city_id])\n\n    return (<React.Fragment >\n        <div className=\"text-center mb-4\">\n            <h5>Шаги</h5>\n            <p className=\"card-title-desc\">Заполните шаги (если ни один шаг не будет добавлен, то будут использованны, стандратные)</p>\n        </div>\n        \n            {\n                quizSteps.map((step, i) => {\n                    return <React.Fragment key={i}><div>\n                                <div className=\"row\">\n                                    <div className=\"mb-3\">\n                                        Шаг {i+1} / {quizSteps.length}\n                                    </div>\n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"col-lg-6\">\n                                        <div className=\"mb-3\">\n                                            <label htmlFor=\"basicpill-servicetax-input\" className=\"form-label\">Текст вопроса</label>\n                                            <input type=\"text\" indexstep={i} onChange={questionChange} className=\"form-control\" name=\"mail\" id=\"basicpill-servicetax-input\" value={step.title} />\n                                        </div>\n                                    </div>\n                                    <div className=\"col-lg-6\">\n                                        <div className=\"mb-3\">\n                                            <label htmlFor=\"basicpill-servicetax-input\" className=\"form-label\">Тип шага</label>\n                                            <select onChange={changeQuestionType} stepindex={i} className=\"form-select custom-select\" id=\"template\" name=\"template_id\" name=\"qoopler\" value={step.type} >\n                                                <option value=\"text\">Текстовый</option>\n                                                <option value=\"slider\">Слайдер</option>\n                                                <option value=\"raions\">Районы</option>\n                                                <option value=\"rooms\">Количество комнат</option>\n                                                <option value=\"slider_r\">Слайдер (цены из района)</option>\n                                            </select>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                {step.type == \"text\" ?<React.Fragment>\n                                        <div className=\"mb-3\" style={{marginLeft:\"15px\"}}>\n                                            <span>Ответы на вопрос</span>\n                                        </div>\n                                        {step.answers.map((answer, index) => {\n                                        return <div key={i} className=\"column\">\n                                                <div className=\"col-lg-6 ml-2\">\n                                                    <div className=\"mb-3\" style={{display:\"flex\", marginLeft:\"30px\", alignItems:\"center\"}}>\n                                                        {index+1}.  <input style={{marginLeft:\"10px\", marginRight:\"10px\"}} type=\"text\" autoComplete=\"off\" onChange={answerChange} indexanswer={index} indexstep={i} className=\"form-control\" name=\"mail\" id=\"basicpill-servicetax-input\" value={answer}  /> {step.answers.length>1?<i onClick={() => {stepDelete(i, index)}} className=\"feather-trash\" style={{color:\"red\"}} />:\"\"}\n                                                    </div>\n                                                </div>\n                                            </div>})\n                                        }\n                                        </React.Fragment>\n                                    \n                                    :step.type == \"raions\"?<React.Fragment>\n                                         <div className=\"mb-3\" >\n                                            <span>Районы города</span>\n                                        </div>\n                                        <div className=\"row\">\n                                            {\n                                                raions.map((raion) => {\n                                                    return raion.Name+\", \"\n                                                })\n                                            }\n                                        </div>\n                                    </React.Fragment>:step.type == \"slider_r\"?<React.Fragment>\n                                         <div className=\"mb-3\" >\n                                            <span>Слайдер подтянет цены по районам, параметры задавать не нужно, только тайтл шага</span>\n                                        </div>\n                                    </React.Fragment>:step.type == \"rooms\"?<React.Fragment>\n                                         <div className=\"mb-3\" >\n                                            <span>Шаг выбора количества комнат</span>\n                                        </div>\n                                    </React.Fragment>:<React.Fragment>\n                                        <div className=\"mb-3\" >\n                                            <span>Параметры слайдера</span>\n                                        </div>\n                                        <div className=\"row\">\n                                            <div className=\"col-lg-6\">\n                                                <div className=\"mb-3\">\n                                                    <label htmlFor=\"basicpill-servicetax-input\" className=\"form-label\">От</label>\n                                                    <input type=\"text\" indexstep={i} onChange={sliderParamChange} name=\"from\" value={step.from} className=\"form-control\" id=\"basicpill-servicetax-input\" />\n                                                </div>\n                                            </div>\n                                            <div className=\"col-lg-6\">\n                                                <div className=\"mb-3\">\n                                                    <label htmlFor=\"basicpill-servicetax-input\" className=\"form-label\">До</label>\n                                                    <input type=\"text\" indexstep={i} onChange={sliderParamChange} name=\"to\" value={step.to} className=\"form-control\" id=\"basicpill-servicetax-input\" />\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div className=\"row\">\n                                            <div className=\"mb-3\">\n                                                <label htmlFor=\"basicpill-servicetax-input\" className=\"form-label\">Шаг</label>\n                                                <input type=\"text\" indexstep={i} onChange={sliderParamChange} name=\"step\" value={step.step} className=\"form-control\" id=\"basicpill-servicetax-input\" />\n                                            </div>\n                                        </div>\n                                    </React.Fragment>\n                                }\n                                \n                            </div>\n                            <hr className=\"my-4\"></hr>\n                        </React.Fragment>\n                })\n            }\n        <div className=\"d-flex justify-content-center\">\n            <button className=\"btn btn-primary\" onClick={addStep}><i className=\"feather-plus\"></i> Добавить шаг </button>\n        </div>\n    </React.Fragment>)\n}\n\nexport default StepsComponent"]},"metadata":{},"sourceType":"module"}