{"ast":null,"code":"import _classCallCheck from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _slicedToArray from\"/Users/laurkankusu/Documents/development/domains-server/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import PageOrganization from\"../../../page-title\";import{useNavigate}from\"react-router-dom\";import{Modals,showModal}from\"../../../modals\";import{compose}from\"../../../../utils\";import{withApiService}from\"../../../hoc\";import{connect}from\"react-redux\";import{bindActionCreators}from'redux';import{Component,useEffect,useState}from\"react\";import{deleteOrganization,fetchOrganizations,updateOrganization}from\"../../../../actions/organizations\";import{Spinner}from\"../../../spinner\";import TableItem from\"./table-item\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrganizationsPage=function OrganizationsPage(_ref){var organizations=_ref.organizations,deleteOrganization=_ref.deleteOrganization,updateOrganization=_ref.updateOrganization,fetchOrganizations=_ref.fetchOrganizations;var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),editOrganization=_useState2[0],setEditOrganization=_useState2[1];var forms=[{title:'Добавить организацию',name:'addOrganization',url:\"/api/organizations/\",type:\"put\",action:function action(_action){console.log('need to close modal');fetchOrganizations();},fields:[{name:'Название',json:'name',type:'text'},{name:'Адрес',json:'adress',type:'text'},{name:'Номер телефона',json:'Phone',type:'text'}]},{title:'Редактировать организацию',name:'updateOrganization',url:\"/api/organizations/\",type:\"post\",action:function action(_action2){console.log(_action2);fetchOrganizations();},edit:function edit(action){setEditOrganization(action);},//imageurl:\"public/objects/\"+activeObject.ID+\"/actions/\", //id\ndate:editOrganization,clear:false,fields:[{name:'Название',json:'name',type:'text'},{name:'Адрес',json:'adress',type:'text'},{name:'Номер телефона',json:'Phone',type:'text'},{json:'ID',type:'hidden'}]},{title:'Удалить организацию',question:'Вы действительно хотите удалить организацию?',name:'deleteOrganization',url:\"/api/organizations/\"+editOrganization.id,type:\"delete\",action:function action(_action3){console.log(_action3);fetchOrganizations();},//edit: () => {},\ndate:editOrganization,clear:false,fields:[{json:'ID',type:'hidden'}]}];return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(PageOrganization,{title:\"Список подмен\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"\",style:{display:\"flex\",justifyContent:\"end\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){showModal('addOrganization');},type:\"button\",className:\"btn btn-primary waves-effect waves-light\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"feather-plus\"}),\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u044E\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"DataTables_Table_0_wrapper\",className:\"dataTables_wrapper dt-bootstrap4 no-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dataTables_length\",id:\"DataTables_Table_0_length\",children:/*#__PURE__*/_jsxs(\"label\",{style:{display:\"flex\"},children:[\"Show \",/*#__PURE__*/_jsxs(\"select\",{style:{width:\"60px\",marginLeft:\"10px\",marginRight:\"10px\"},className:\"custom-select custom-select-sm form-control form-control-sm form-select form-select-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10\"}),/*#__PURE__*/_jsx(\"option\",{value:\"25\",children:\"25\"}),/*#__PURE__*/_jsx(\"option\",{value:\"50\",children:\"50\"}),/*#__PURE__*/_jsx(\"option\",{value:\"100\",children:\"100\"})]}),\" entries\"]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{id:\"DataTables_Table_0_filter\",className:\"dataTables_filter\",children:/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041F\\u043E\\u0438\\u0441\\u043A:\",/*#__PURE__*/_jsx(\"input\",{type:\"search\",className:\"form-control form-control-sm\",placeholder:\"\",\"aria-controls\":\"DataTables_Table_0\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\",style:{borderCollapse:\"collapse\",borderSpacing:\"0px 8px\",width:\"100%\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-transparent\",role:\"row\",children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"30px\"},className:\"sorting sorting_asc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-check font-size-16\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"check\",className:\"form-check-input\",id:\"checkAll\"}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:\"checkAll\"})]})}),/*#__PURE__*/_jsx(\"th\",{style:{},className:\"sorting\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{style:{},className:\"sorting\",children:\"\\u0410\\u0434\\u0440\\u0435\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{style:{},className:\"sorting\",children:\"\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"200px\"},className:\"sorting\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:organizations.map(function(organization){return/*#__PURE__*/_jsx(TableItem,{organization:organization,deleteOrganization:function deleteOrganization(e){e.preventDefault();setEditOrganization(organization);showModal(\"deleteOrganization\");},updateOrganization:function updateOrganization(e){e.preventDefault();setEditOrganization(organization);showModal(\"updateOrganization\");}},organization.id);})})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dataTables_info\",id:\"DataTables_Table_0_info\",role:\"status\",\"aria-live\":\"polite\",children:\"Showing 1 to 10 of 12 entries\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-12 col-md-7\",children:/*#__PURE__*/_jsx(\"div\",{className:\"dataTables_paginate paging_simple_numbers\",id:\"DataTables_Table_0_paginate\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"paginate_button page-item previous disabled\",id:\"DataTables_Table_0_previous\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",\"aria-controls\":\"DataTables_Table_0\",\"data-dt-idx\":\"0\",tabindex:\"0\",className:\"page-link\",children:\"Previous\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"paginate_button page-item active\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",\"aria-controls\":\"DataTables_Table_0\",\"data-dt-idx\":\"1\",tabindex:\"0\",className:\"page-link\",children:\"1\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"paginate_button page-item \",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",\"aria-controls\":\"DataTables_Table_0\",\"data-dt-idx\":\"2\",tabindex:\"0\",className:\"page-link\",children:\"2\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"paginate_button page-item next\",id:\"DataTables_Table_0_next\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",\"aria-controls\":\"DataTables_Table_0\",\"data-dt-idx\":\"3\",tabindex:\"0\",className:\"page-link\",children:\"Next\"})})]})})})]})]})})]})})})})]})}),/*#__PURE__*/_jsx(Modals,{forms:forms})]});};var OrganizationListPageContainer=/*#__PURE__*/function(_Component){_inherits(OrganizationListPageContainer,_Component);var _super=_createSuper(OrganizationListPageContainer);function OrganizationListPageContainer(){_classCallCheck(this,OrganizationListPageContainer);return _super.apply(this,arguments);}_createClass(OrganizationListPageContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.fetchOrganizations();}},{key:\"render\",value:function render(){var _this$props=this.props,organizations=_this$props.organizations,loading=_this$props.loading,error=_this$props.error,deleteOrganization=_this$props.deleteOrganization,updateOrganization=_this$props.updateOrganization,fetchOrganizations=_this$props.fetchOrganizations;if(loading||organizations==null){return/*#__PURE__*/_jsx(Spinner,{});}return/*#__PURE__*/_jsx(OrganizationsPage,{organizations:organizations,loading:loading,error:error,deleteOrganization:deleteOrganization,updateOrganization:updateOrganization,fetchOrganizations:fetchOrganizations});}}]);return OrganizationListPageContainer;}(Component);var mapStateToProps=function mapStateToProps(_ref2){var _ref2$organizationsLi=_ref2.organizationsList,organizations=_ref2$organizationsLi.organizations,loading=_ref2$organizationsLi.loading,error=_ref2$organizationsLi.error;return{organizations:organizations,loading:loading,error:error};};var mapDispatchToProps=function mapDispatchToProps(dispatch,_ref3){var apiService=_ref3.apiService;return bindActionCreators({fetchOrganizations:fetchOrganizations(apiService),updateOrganization:updateOrganization,deleteOrganization:deleteOrganization},dispatch);};export default compose(withApiService(),connect(mapStateToProps,mapDispatchToProps))(OrganizationListPageContainer);","map":{"version":3,"sources":["/Users/laurkankusu/Documents/development/domains-server/admin/src/components/pages/organizations/organizations-list/organizations-list.js"],"names":["PageOrganization","useNavigate","Modals","showModal","compose","withApiService","connect","bindActionCreators","Component","useEffect","useState","deleteOrganization","fetchOrganizations","updateOrganization","Spinner","TableItem","OrganizationsPage","organizations","navigate","editOrganization","setEditOrganization","forms","title","name","url","type","action","console","log","fields","json","edit","date","clear","question","id","display","justifyContent","width","marginLeft","marginRight","borderCollapse","borderSpacing","map","organization","e","preventDefault","OrganizationListPageContainer","props","loading","error","mapStateToProps","organizationsList","mapDispatchToProps","dispatch","apiService"],"mappings":"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","sourcesContent":["import PageOrganization from \"../../../page-title\"\nimport { useNavigate } from \"react-router-dom\"\nimport { Modals, showModal } from \"../../../modals\"\nimport { compose } from \"../../../../utils\";\nimport { withApiService } from \"../../../hoc\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport { Component, useEffect, useState } from \"react\";\nimport { deleteOrganization, fetchOrganizations, updateOrganization } from \"../../../../actions/organizations\";\nimport { Spinner } from \"../../../spinner\";\nimport TableItem from \"./table-item\";\n\nconst OrganizationsPage = ({ organizations, deleteOrganization, updateOrganization, fetchOrganizations }) => {\n    const navigate = useNavigate();\n    const [editOrganization, setEditOrganization] = useState({})\n    const forms = [\n        {\n            title: 'Добавить организацию',\n            name: 'addOrganization',\n            url: \"/api/organizations/\",\n            type: \"put\",\n            action: (action) => { console.log('need to close modal'); fetchOrganizations() },\n            fields: [\n                {\n                    name: 'Название',\n                    json: 'name',\n                    type: 'text',\n                },\n                {\n                    name: 'Адрес',\n                    json: 'adress',\n                    type: 'text',\n                },\n                {\n                    name: 'Номер телефона',\n                    json: 'Phone',\n                    type: 'text',\n                },\n            ],\n        },\n        {\n            title: 'Редактировать организацию',\n            name: 'updateOrganization',\n            url: \"/api/organizations/\",\n            type: \"post\",\n            action: (action) => { console.log(action); fetchOrganizations() },\n            edit: (action) => { setEditOrganization(action) },\n            //imageurl:\"public/objects/\"+activeObject.ID+\"/actions/\", //id\n            date: editOrganization,\n            clear: false,\n            fields: [\n                {\n                    name: 'Название',\n                    json: 'name',\n                    type: 'text',\n                },\n                {\n                    name: 'Адрес',\n                    json: 'adress',\n                    type: 'text',\n                },\n                {\n                    name: 'Номер телефона',\n                    json: 'Phone',\n                    type: 'text',\n                },\n                {\n                    json: 'ID',\n                    type: 'hidden',\n                },\n            ],\n        },\n        {\n            title: 'Удалить организацию',\n            question: 'Вы действительно хотите удалить организацию?',\n            name: 'deleteOrganization',\n            url: \"/api/organizations/\" + editOrganization.id,\n            type: \"delete\",\n            action: (action) => { console.log(action); fetchOrganizations() },\n            //edit: () => {},\n            date: editOrganization,\n            clear: false,\n            fields: [\n                {\n                    json: 'ID',\n                    type: 'hidden',\n                },\n            ]\n        },\n    ]\n    return <div className=\"main-content\">\n        <div className=\"page-content\">\n            <div className=\"container-fluid\">\n                <PageOrganization title={\"Список подмен\"} />\n                <div className=\"row\">\n                    <div className=\"col-lg-12\">\n                        <div className=\"card\">\n                            <div className=\"card-body\">\n                                <div className=\"\" style={{ display: \"flex\", justifyContent: \"end\" }}>\n                                    <div className=\"mb-4\">\n                                        <button onClick={() => { showModal('addOrganization') }} type=\"button\" className=\"btn btn-primary waves-effect waves-light\"><i className=\"feather-plus\"></i> Добавить организацию</button>\n                                    </div>\n                                </div>\n                                <div className=\"table-responsive\">\n                                    <div id=\"DataTables_Table_0_wrapper\" className=\"dataTables_wrapper dt-bootstrap4 no-footer\"><div className=\"row\"><div className=\"col-sm-12 col-md-6\"><div className=\"dataTables_length\" id=\"DataTables_Table_0_length\">\n                                        <label style={{ display: \"flex\" }}>\n                                            Show <select style={{ width: \"60px\", marginLeft: \"10px\", marginRight: \"10px\" }} className=\"custom-select custom-select-sm form-control form-control-sm form-select form-select-sm\">\n                                                <option value=\"10\">10</option>\n                                                <option value=\"25\">25</option>\n                                                <option value=\"50\">50</option>\n                                                <option value=\"100\">100</option>\n                                            </select> entries\n                                        </label>\n                                    </div>\n                                    </div>\n                                        <div className=\"col-sm-12 col-md-6\">\n                                            <div id=\"DataTables_Table_0_filter\" className=\"dataTables_filter\">\n                                                <label>Поиск:<input type=\"search\" className=\"form-control form-control-sm\" placeholder=\"\" aria-controls=\"DataTables_Table_0\" /></label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                        <div className=\"row\">\n                                            <div className=\"col-sm-12\">\n                                                <table className=\"table align-middle datatable dt-responsive table-check nowrap dataTable no-footer table-striped\" style={{ borderCollapse: \"collapse\", borderSpacing: \"0px 8px\", width: \"100%\" }} >\n                                                    <thead>\n                                                        <tr className=\"bg-transparent\" role=\"row\">\n                                                            <th style={{ width: \"30px\" }} className=\"sorting sorting_asc\">\n                                                                <div className=\"form-check font-size-16\">\n                                                                    <input type=\"checkbox\" name=\"check\" className=\"form-check-input\" id=\"checkAll\" />\n                                                                    <label className=\"form-check-label\" htmlFor=\"checkAll\"></label>\n                                                                </div>\n                                                            </th>\n                                                            <th style={{}} className=\"sorting\" >Название</th>\n                                                            <th style={{}} className=\"sorting\" >Адрес</th>\n                                                            <th style={{}} className=\"sorting\" >Номер телефона</th>\n                                                            <th style={{ width: \"200px\" }} className=\"sorting\" >Action</th>\n                                                        </tr>\n                                                    </thead>\n                                                    <tbody>\n                                                        {\n                                                            organizations.map((organization) => {\n                                                                return <TableItem key={organization.id} organization={organization} deleteOrganization={(e) => { e.preventDefault(); setEditOrganization(organization); showModal(\"deleteOrganization\") }} updateOrganization={(e) => { e.preventDefault(); setEditOrganization(organization); showModal(\"updateOrganization\") }} />\n                                                            })\n                                                        }\n                                                    </tbody>\n                                                </table>\n                                            </div>\n                                        </div>\n                                        <div className=\"row\">\n                                            <div className=\"col-sm-12 col-md-5\">\n                                                <div className=\"dataTables_info\" id=\"DataTables_Table_0_info\" role=\"status\" aria-live=\"polite\">Showing 1 to 10 of 12 entries</div>\n                                            </div>\n                                            <div className=\"col-sm-12 col-md-7\">\n                                                <div className=\"dataTables_paginate paging_simple_numbers\" id=\"DataTables_Table_0_paginate\">\n                                                    <ul className=\"pagination\">\n                                                        <li className=\"paginate_button page-item previous disabled\" id=\"DataTables_Table_0_previous\">\n                                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"0\" tabindex=\"0\" className=\"page-link\">Previous</a>\n                                                        </li>\n                                                        <li className=\"paginate_button page-item active\">\n                                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"1\" tabindex=\"0\" className=\"page-link\">1</a>\n                                                        </li>\n                                                        <li className=\"paginate_button page-item \">\n                                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"2\" tabindex=\"0\" className=\"page-link\">2</a>\n                                                        </li>\n                                                        <li className=\"paginate_button page-item next\" id=\"DataTables_Table_0_next\">\n                                                            <a href=\"#\" aria-controls=\"DataTables_Table_0\" data-dt-idx=\"3\" tabindex=\"0\" className=\"page-link\">Next</a>\n                                                        </li>\n                                                    </ul>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <Modals forms={forms} />\n    </div>\n}\n\nclass OrganizationListPageContainer extends Component {\n\n    componentDidMount() {\n        this.props.fetchOrganizations();\n    }\n\n    render() {\n        const { organizations, loading, error, deleteOrganization, updateOrganization, fetchOrganizations } = this.props;\n        if (loading || organizations == null) {\n            return <Spinner />\n        }\n        return <OrganizationsPage organizations={organizations} loading={loading} error={error} deleteOrganization={deleteOrganization} updateOrganization={updateOrganization} fetchOrganizations={fetchOrganizations} />;\n    }\n}\n\nconst mapStateToProps = ({ organizationsList: { organizations, loading, error } }) => {\n    return { organizations, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { apiService }) => {\n    return bindActionCreators({\n        fetchOrganizations: fetchOrganizations(apiService),\n        updateOrganization: updateOrganization,\n        deleteOrganization: deleteOrganization,\n    }, dispatch);\n};\n\nexport default compose(\n    withApiService(),\n    connect(mapStateToProps, mapDispatchToProps)\n)(OrganizationListPageContainer);"]},"metadata":{},"sourceType":"module"}